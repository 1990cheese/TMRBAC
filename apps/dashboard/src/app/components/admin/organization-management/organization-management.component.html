<div class="p-6">
    <h1 class="text-3xl font-bold mb-6 w-[350px]">Organization Management</h1>
    
    <div class="bg-white p-6 rounded-lg shadow-md mb-8 w-[350px]" >
      <h2 class="text-2xl font-semibold mb-4">Add User to Organization</h2>
      <div *ngIf="!isLoading; else loadingForm">
        <form [formGroup]="addUserForm" (ngSubmit)="onAddUserSubmit()">
          <div class="mb-4">
            <label for="organization" class="block text-sm font-medium text-gray-700">Select Organization</label>
            <select formControlName="organizationId" id="organization" class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md">
              <option *ngFor="let org of organizations" [value]="org.id">{{ org.name }}</option>
            </select>
          </div>
  
          <div class="mb-4">
            <label for="user" class="block text-sm font-medium text-gray-700">Select User</label>
            <select formControlName="userId" id="user" class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md">
              <option *ngFor="let user of users" [value]="user.id">{{ user.firstName }} {{ user.lastName }} ({{user.email}})</option>
            </select>
          </div>
          
          <button type="submit" [disabled]="!addUserForm.valid" class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded-lg disabled:opacity-50">
            Assign User
          </button>
          <p *ngIf="successMessage" class="text-green-600 mt-2">{{ successMessage }}</p>
          <p *ngIf="errorMessage" class="text-red-600 mt-2">{{ errorMessage }}</p>
        </form>
      </div>
      <ng-template #loadingForm><p>Loading data...</p></ng-template>
    </div>
    <app-warning-modal [visible]="showModal" [message]="modalMessage" (closed)="showModal = false"></app-warning-modal>
  </div>